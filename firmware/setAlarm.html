<!DOCTYPE>
<html>
	<head>
	<script type="text/javascript">

	var aSlap={
		padfield:function(f){
			return (f<10)? "0"+f : f
		},
		init:function(){
			var dateobj=new Date()
			this.submitref=document.getElementById("submitbutton")
			this.submitref.onclick=function(){
				aSlap.setalarm()
				this.value="Alarm Set"
				this.disabled=true
				return false
			}
			this.resetref=document.getElementById("resetbutton")
			this.resetref.onclick=function(){
			aSlap.submitref.disabled=false
			aSlap.hourwake=undefined
			aSlap.hourselect.disabled=false
			aSlap.minuteselect.disabled=false
			return false
			}
			var selections=document.getElementsByTagName("select")
			this.hourselect=selections[0]
			this.minuteselect=selections[1]
			for (var i=0; i<60; i++){
				if (i<24) //If still within range of hours field: 0-23
				this.hourselect[i]=new Option(this.padfield(i), this.padfield(i), false, dateobj.getHours()==i)
				this.minuteselect[i]=new Option(this.padfield(i), this.padfield(i), false, dateobj.getMinutes()==i)
			}
		},
		setalarm:function(){
			document.getElementById("timeString")
			this.hourwake=this.hourselect.options[this.hourselect.selectedIndex].value
			this.minutewake=this.minuteselect.options[this.minuteselect.selectedIndex].value
			this.hourselect.disabled=true
			this.minuteselect.disabled=true
		}
		
		}
		var concatenate=function(){
				
				document.getElementById("timeString").value = document.getElementsByTagName("select")[0].value + ":" + document.getElementsByTagName("select")[1].value
			}
		</script>
	</head>

	<body>
	<center>
		<br>
		<br>
		<br>
		<br>
		<div id="aSlap">
		<div><div class="leftcolumn">Set Alarm Time:</div> <span><select onchange="concatenate()"></select> Hour</span> <span><select onchange="concatenate()"></select> Minutes</span></div>
		<input type="submit" value="Set Slap Time" id="submitbutton" /> <input type="reset" value="Reset" id="resetbutton" />
		</div>
		
		<form action="https://api.particle.io/v1/devices/55ff6d066678505556411367/alarm?access_token=c0ed181d6b0d4884303399e8934f92c6362012af" method="POST">
		<br>
		<input type="hidden" id="timeString" name="arg" value="07:00"/>

		<br>
		<input type="submit" value="Send data to cloud!">
	  </form>
		
		<script type="text/javascript">

		aSlap.init()

		</script>
		
	</center>
	</body>
</html>